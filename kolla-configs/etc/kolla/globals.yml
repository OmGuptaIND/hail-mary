kolla_base_distro: "ubuntu"
kolla_install_type: "source"
openstack_release: "2025.1"

# OVN Configuration
neutron_plugin_agent: "ovn"
enable_ovn: "yes"
enable_neutron_dvr: "no"  # OVN has built-in distributed routing

# OVN Database (for single node)
ovn_nb_db_clustered: "false"
ovn_sb_db_clustered: "false"
ovn_nb_db_host: "{{ kolla_internal_vip_address }}"
ovn_sb_db_host: "{{ kolla_internal_vip_address }}"

# OVN Relay (disabled for single node to avoid group reference errors)
enable_ovn_nb_db_relay: "no"
enable_ovn_sb_db_relay: "no"

# Networking
enable_neutron_provider_networks: "yes"
neutron_type_drivers: "geneve,vlan,flat"
neutron_tenant_network_types: "geneve"
ovn_bridge_mappings: "external:br-ex"  # Added for external network

# VIPs
kolla_internal_vip_address: "10.180.220.100"
kolla_external_vip_address: "185.150.116.100"

# OVS extras (OVN uses OVS)
openvswitch_db_volumes_extra: "/lib/modules:/lib/modules:ro,/run/openvswitch:/run/openvswitch:shared"
openvswitch_vswitchd_volumes_extra: "/run/openvswitch:/run/openvswitch:shared"

# BGP Configuration
ovn_bgp_agent: "yes"  # Enable OVN BGP Agent for distributed announcement
enable_neutron_bgp_dragent: "yes"  # Enables Neutron BGP speaker
neutron_bgp_speaker_peer_ip: "46.166.166.122"
neutron_bgp_speaker_peer_asn: 16125  # Cherry's ASN; confirm with support
neutron_bgp_speaker_local_asn: 0  # Your local ASN from portal
neutron_bgp_speaker_driver: "ovn"  # For OVN integration

# Console
nova_console: "none"

# MariaDB
enable_mariadb: "yes"
enable_mariadb_galera_cluster: "no"
mariadb_mode: "standalone"

# HA
enable_haproxy: "yes"
enable_keepalived: "yes"

# Core services
enable_keystone: "yes"
enable_glance: "yes"
enable_nova: "yes"
enable_neutron: "yes"
enable_horizon: "yes"
enable_placement: "yes"

# Disable non-essentials
enable_cinder: "no"
enable_ironic: "no"
enable_heat: "no"
enable_barbican: "no"
enable_designate: "no"
enable_magnum: "no"
enable_manila: "no"
enable_murano: "no"
enable_octavia: "no"
enable_sahara: "no"
enable_senlin: "no"
enable_solum: "no"
enable_tacker: "no"
enable_trove: "no"
enable_watcher: "no"
enable_zun: "no"

# Neutron optionals
enable_neutron_infoblox_ipam_agent: "no"
enable_neutron_metering: "no"
enable_ironic_neutron_agent: "no"
enable_neutron_sriov: "no"
enable_neutron_mlnx: "no"

# Nova
nova_compute_virt_type: "kvm"

# Monitoring (disabled)
enable_prometheus: "no"
enable_grafana: "no"
enable_opensearch: "no"
enable_opensearch_dashboards: "no"
enable_fluentd: "no"
enable_central_logging: "no"

# Storage backends
enable_swift: "no"
glance_backend_file: "yes"
glance_backend_swift: "no"

# Security
# enable_tls_internal: "yes"
# enable_tls_external: "yes"
# kolla_enable_tls_backend: "yes"
# kolla_copy_ca_into_containers: "yes"
# enable_firewall: "yes"